extends ../layout

block customhead
    link(rel="stylesheet", href="/css/tablesorter.theme.blue.css")
    link(rel="stylesheet", href="/css/error_page.css")
    script(src='/js/tablesorter.js')
    script(src="/js/pagination.js")



block content
    .container
        div.row    
            if course_terms_and_ids.length == 0
                .container
                    .container
                        .row
                            p.center(style="font-size: 40px", text-align="center") We're Sorry!
                        .row
                            p We couldn't find anything matching what you searched :(
                        .row
                            p Try searching again!
                        .row
                            form(action='/subject/')
                                input(type='text', placeholder='Search..', name='search')
                                button(type='submit')
                                    i.fa.fa-search
            else
                table(id="term_table" class="terms_table tablesorter-blue")
                    thead
                        tr
                            th Subject
                            th Catalog Number
                            th Class Section
                            th SIS ID
                            th Class Title
                            th Class Type
                            th Instructor
                            th Currently Enrolled
                            th Enrollment Capacity
                            th Waiting List
                            th Class Status
                            th Meeting Days
                            th Class Starting Time
                            th Class Ending Time
                            th Class Date Begins
                            th Class Date Ends
                    tbody
                        - var page = 0
                        each course_term_and_id, index in course_terms_and_ids
                            -console.log(course_term_and_id)
                            tr.paged(page=page, style=("display:None"))
                                if course_term_and_id['meetings'].length == 0
                                    td=course_term_and_id['subject']
                                    td=course_term_and_id['catalog_number']
                                    td=course_term_and_id['section']
                                    td=course_term_and_id['sis_id']
                                    td=course_term_and_id['title']
                                    td=course_term_and_id['type']
                                    td=course_term_and_id['instructors']
                                    td=course_term_and_id['enrollment']['in']
                                    td=course_term_and_id['enrollment']['of']
                                    td=course_term_and_id['enrollment']['waiting']
                                    td=course_term_and_id['status']
                                    td="Not found"
                                    td="Not found"
                                    td="Not found"
                                    td="Not found"
                                    td="Not found"
                                
                                else
                                    
                                    td=course_term_and_id['subject']
                                    td=course_term_and_id['catalog_number']
                                    td=course_term_and_id['section']
                                    td=course_term_and_id['sis_id']
                                    td=course_term_and_id['title']
                                    td=course_term_and_id['type']
                                    td=course_term_and_id['instructors']
                                    td=course_term_and_id['enrollment']['in']
                                    td=course_term_and_id['enrollment']['of']
                                    td=course_term_and_id['enrollment']['waiting']
                                    td=course_term_and_id['status']
                                    td=course_term_and_id['meetings'][0]['days']
                                    td=course_term_and_id['meetings'][0]['start']
                                    td=course_term_and_id['meetings'][0]['finish']
                                    td=course_term_and_id['meetings'][0]['begin']
                                    td=course_term_and_id['meetings'][0]['complete']
                            if index % 20 == 19
                                -page++
                                

                .row
                    #max_page_div(max_page = page)
                    button.btn.btn-primary(type='submit', onClick="previousPage()") Previous
                    button.btn.btn-primary.pageselector
                    button.btn.btn-primary.pageselector
                    button.btn.btn-primary.pageselector
                    button.btn.btn-primary.pageselector
                    button.btn.btn-primary.pageselector
                    button.btn.btn-primary.pageselector
                    button.btn.btn-primary.pageselector
                    button.btn.btn-primary.pageselector
                    button.btn.btn-primary.pageselector
                    button.btn.btn-primary.pageselector
                    button.btn.btn-primary(type='submit', onClick="nextPage()") Next
            
